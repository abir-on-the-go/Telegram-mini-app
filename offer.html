<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Offer</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            color: #333;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            color: #4a5568;
            margin-bottom: 20px;
        }
        
        .timer {
            font-size: 3em;
            font-weight: bold;
            color: #48bb78;
            margin: 20px 0;
        }
        
        .instructions {
            margin: 20px 0;
            line-height: 1.6;
        }
        
        button {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .success {
            color: #48bb78;
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Complete the Offer</h1>
        
        <div id="timer-section">
            <div class="instructions">
                Please stay on this page for <strong>25 seconds</strong> to verify offer completion.
            </div>
            <div class="timer" id="countdown">25</div>
            <button onclick="completeOffer()">I Completed the Offer</button>
        </div>
        
        <div id="success-section" style="display: none;">
            <div class="success">âœ… Offer Completed Successfully!</div>
            <p>You've earned <strong id="reward-amount">5</strong> coins!</p>
            <button onclick="closeApp()">Return to App</button>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const offerId = urlParams.get('offer_id');
        const userId = urlParams.get('user_id');
        const tg = window.Telegram.WebApp;
        
        let countdown = 25;
        let timerInterval;
        
        function startTimer() {
            timerInterval = setInterval(() => {
                countdown--;
                document.getElementById('countdown').textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(timerInterval);
                    completeOffer();
                }
            }, 1000);
        }
        
        function completeOffer() {
            clearInterval(timerInterval);
            
            // Determine reward based on offer ID
            const rewards = {1: 5, 2: 8, 3: 10, 4: 3};
            const reward = rewards[offerId] || 5;
            
            document.getElementById('reward-amount').textContent = reward;
            document.getElementById('timer-section').style.display = 'none';
            document.getElementById('success-section').style.display = 'block';
            
            // Send data back to main app
            if (window.opener) {
                window.opener.completeOffer(offerId, reward);
            }
        }
        
        function closeApp() {
            if (window.opener) {
                window.close();
            } else if (tg && tg.close) {
                tg.close();
            }
        }
        
        // Start timer when page loads
        startTimer();
        

// Rewarded interstitial

show_9796014().then(() => {
    // You need to add your user reward function here, which will be executed after the user watches the ad.
    // For more details, please refer to the detailed instructions.
    alert('You have seen an ad!');
})


// In-App Interstitial

show_9796014({
  type: 'inApp',
  inAppSettings: {
    frequency: 2,
    capping: 0.1,
    interval: 30,
    timeout: 5,
    everyPage: false
  }
})

/*
This value is decoded as follows:
- show automatically 2 ads
  within 0.1 hours (6 minutes)
  with a 30-second interval between them
  and a 5-second delay before the first one is shown.
  The last digit, 0, means that the session will be saved when you navigate between pages.
  If you set the last digit as 1, then at any transition between pages,
  the session will be reset, and the ads will start again.
*/


        
    </script>
</body>
</html>


